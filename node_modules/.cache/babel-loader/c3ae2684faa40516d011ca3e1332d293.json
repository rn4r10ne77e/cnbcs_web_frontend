{"ast":null,"code":"/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"../canvas.js\").BuilderType, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder\n};\nvar BuilderGroup = /** @class */function () {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, Builder>>}\n     */\n    this.buildersByZIndex_ = {};\n  }\n  /**\n   * @return {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n  BuilderGroup.prototype.finish = function () {\n    var builderInstructions = {};\n    for (var zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      var builders = this.buildersByZIndex_[zKey];\n      for (var builderKey in builders) {\n        var builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n    return builderInstructions;\n  };\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"../canvas.js\").BuilderType} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n  BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n    var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    var replays = this.buildersByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n    var replay = replays[builderType];\n    if (replay === undefined) {\n      var Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n      replays[builderType] = replay;\n    }\n    return replay;\n  };\n  return BuilderGroup;\n}();\nexport default BuilderGroup;","map":{"version":3,"sources":["../../src/render/canvas/BuilderGroup.js"],"names":[],"mappings":"AAAA;;AAEG;AAEH,OAAO,OAAO,MAAM,cAAc;AAClC,OAAO,YAAY,MAAM,mBAAmB;AAC5C,OAAO,iBAAiB,MAAM,wBAAwB;AACtD,OAAO,cAAc,MAAM,qBAAqB;AAChD,OAAO,WAAW,MAAM,kBAAkB;AAE1C;;AAEG;AACH,IAAM,kBAAkB,GAAG;EACzB,QAAQ,EAAE,cAAc;EACxB,SAAS,EAAE,OAAO;EAClB,OAAO,EAAE,YAAY;EACrB,YAAY,EAAE,iBAAiB;EAC/B,SAAS,EAAE,cAAc;EACzB,MAAM,EAAE;CACT;AAED,IAAA,YAAA,GAAA,aAAA,YAAA;EACE;;;;;AAKG;EACH,SAAA,YAAA,CAAY,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAA;IACtD;;;AAGG;IACH,IAAI,CAAC,UAAU,GAAG,SAAS;IAE3B;;;AAGG;IACH,IAAI,CAAC,UAAU,GAAG,SAAS;IAE3B;;;AAGG;IACH,IAAI,CAAC,WAAW,GAAG,UAAU;IAE7B;;;AAGG;IACH,IAAI,CAAC,WAAW,GAAG,UAAU;IAE7B;;;AAGG;IACH,IAAI,CAAC,iBAAiB,GAAG,CAAA,CAAE;EAC7B;EAEA;;AAEG;EACH,YAAA,CAAA,SAAA,CAAA,MAAM,GAAN,YAAA;IACE,IAAM,mBAAmB,GAAG,CAAA,CAAE;IAC9B,KAAK,IAAM,IAAI,IAAI,IAAI,CAAC,iBAAiB,EAAE;MACzC,mBAAmB,CAAC,IAAI,CAAC,GAAG,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAA,CAAE;MAC3D,IAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;MAC7C,KAAK,IAAM,UAAU,IAAI,QAAQ,EAAE;QACjC,IAAM,kBAAkB,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC,MAAM,CAAA,CAAE;QACxD,mBAAmB,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,GAAG,kBAAkB;MAC3D;IACF;IACD,OAAO,mBAAmB;EAC5B,CAAC;EAED;;;;AAIG;EACH,YAAA,CAAA,SAAA,CAAA,UAAU,GAAV,UAAW,MAAM,EAAE,WAAW,EAAA;IAC5B,IAAM,SAAS,GAAG,MAAM,KAAK,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAA,CAAE,GAAG,GAAG;IAChE,IAAI,OAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC;IAC/C,IAAI,OAAO,KAAK,SAAS,EAAE;MACzB,OAAO,GAAG,CAAA,CAAE;MACZ,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,GAAG,OAAO;IAC5C;IACD,IAAI,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC;IACjC,IAAI,MAAM,KAAK,SAAS,EAAE;MACxB,IAAM,WAAW,GAAG,kBAAkB,CAAC,WAAW,CAAC;MACnD,MAAM,GAAG,IAAI,WAAW,CACtB,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,WAAW,CACjB;MACD,OAAO,CAAC,WAAW,CAAC,GAAG,MAAM;IAC9B;IACD,OAAO,MAAM;EACf,CAAC;EACH,OAAA,YAAC;AAAD,CAAC,CAAA,CAAA;AAED,eAAe,YAAY","sourceRoot":"","sourcesContent":["/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"../canvas.js\").BuilderType, typeof Builder>}\n */\nvar BATCH_CONSTRUCTORS = {\n    'Circle': PolygonBuilder,\n    'Default': Builder,\n    'Image': ImageBuilder,\n    'LineString': LineStringBuilder,\n    'Polygon': PolygonBuilder,\n    'Text': TextBuilder,\n};\nvar BuilderGroup = /** @class */ (function () {\n    /**\n     * @param {number} tolerance Tolerance.\n     * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n     * @param {number} resolution Resolution.\n     * @param {number} pixelRatio Pixel ratio.\n     */\n    function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.tolerance_ = tolerance;\n        /**\n         * @private\n         * @type {import(\"../../extent.js\").Extent}\n         */\n        this.maxExtent_ = maxExtent;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.pixelRatio_ = pixelRatio;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.resolution_ = resolution;\n        /**\n         * @private\n         * @type {!Object<string, !Object<import(\"../canvas.js\").BuilderType, Builder>>}\n         */\n        this.buildersByZIndex_ = {};\n    }\n    /**\n     * @return {!Object<string, !Object<import(\"../canvas.js\").BuilderType, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n     */\n    BuilderGroup.prototype.finish = function () {\n        var builderInstructions = {};\n        for (var zKey in this.buildersByZIndex_) {\n            builderInstructions[zKey] = builderInstructions[zKey] || {};\n            var builders = this.buildersByZIndex_[zKey];\n            for (var builderKey in builders) {\n                var builderInstruction = builders[builderKey].finish();\n                builderInstructions[zKey][builderKey] = builderInstruction;\n            }\n        }\n        return builderInstructions;\n    };\n    /**\n     * @param {number|undefined} zIndex Z index.\n     * @param {import(\"../canvas.js\").BuilderType} builderType Replay type.\n     * @return {import(\"../VectorContext.js\").default} Replay.\n     */\n    BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n        var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n        var replays = this.buildersByZIndex_[zIndexKey];\n        if (replays === undefined) {\n            replays = {};\n            this.buildersByZIndex_[zIndexKey] = replays;\n        }\n        var replay = replays[builderType];\n        if (replay === undefined) {\n            var Constructor = BATCH_CONSTRUCTORS[builderType];\n            replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n            replays[builderType] = replay;\n        }\n        return replay;\n    };\n    return BuilderGroup;\n}());\nexport default BuilderGroup;\n//# sourceMappingURL=BuilderGroup.js.map"]},"metadata":{},"sourceType":"module"}