{"ast":null,"code":"/**\n * @module ol/uri\n */\n\nimport { modulo } from './math.js';\nimport { hashZXY } from './tilecoord.js';\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  /** @type {Array<string>} */\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function (k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri += uri.includes('?') ? '&' : '?';\n  return uri + qs;\n}\nconst zRegEx = /\\{z\\}/g;\nconst xRegEx = /\\{x\\}/g;\nconst yRegEx = /\\{y\\}/g;\nconst dashYRegEx = /\\{-y\\}/g;\n\n/**\n * @param {string} template The URL template.  Should have `{x}`, `{y}`, and `{z}` placeholders.  If\n * the template has a `{-y}` placeholder, the `maxY` parameter must be supplied.\n * @param {number} z The tile z coordinate.\n * @param {number} x The tile x coordinate.\n * @param {number} y The tile y coordinate.\n * @param {number} [maxY] The maximum y coordinate at the given z level.\n * @return {string} The URL.\n */\nexport function renderXYZTemplate(template, z, x, y, maxY) {\n  return template.replace(zRegEx, z.toString()).replace(xRegEx, x.toString()).replace(yRegEx, y.toString()).replace(dashYRegEx, function () {\n    if (maxY === undefined) {\n      throw new Error('If the URL template has a {-y} placeholder, the grid extent must be known');\n    }\n    return (maxY - y).toString();\n  });\n}\n\n/**\n * @param {Array<string>} urls List of URLs.\n * @param {number} z The tile z coordinate.\n * @param {number} x The tile x coordinate.\n * @param {number} y The tile y coordinate.\n * @return {string} The chosen URL.\n */\nexport function pickUrl(urls, z, x, y) {\n  const hash = hashZXY(z, x, y);\n  const index = modulo(hash, urls.length);\n  return urls[index];\n}\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}","map":{"version":3,"names":["modulo","hashZXY","appendParams","uri","params","keyParams","Object","keys","forEach","k","undefined","push","encodeURIComponent","qs","join","replace","includes","zRegEx","xRegEx","yRegEx","dashYRegEx","renderXYZTemplate","template","z","x","y","maxY","toString","Error","pickUrl","urls","hash","index","length","expandUrl","url","match","exec","startCharCode","charCodeAt","stopCharCode","charCode","String","fromCharCode","stop","parseInt","i"],"sources":["C:/prj/cnbcs_web_frontend/node_modules/ol/uri.js"],"sourcesContent":["/**\n * @module ol/uri\n */\n\nimport {modulo} from './math.js';\nimport {hashZXY} from './tilecoord.js';\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  /** @type {Array<string>} */\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function (k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri += uri.includes('?') ? '&' : '?';\n  return uri + qs;\n}\n\nconst zRegEx = /\\{z\\}/g;\nconst xRegEx = /\\{x\\}/g;\nconst yRegEx = /\\{y\\}/g;\nconst dashYRegEx = /\\{-y\\}/g;\n\n/**\n * @param {string} template The URL template.  Should have `{x}`, `{y}`, and `{z}` placeholders.  If\n * the template has a `{-y}` placeholder, the `maxY` parameter must be supplied.\n * @param {number} z The tile z coordinate.\n * @param {number} x The tile x coordinate.\n * @param {number} y The tile y coordinate.\n * @param {number} [maxY] The maximum y coordinate at the given z level.\n * @return {string} The URL.\n */\nexport function renderXYZTemplate(template, z, x, y, maxY) {\n  return template\n    .replace(zRegEx, z.toString())\n    .replace(xRegEx, x.toString())\n    .replace(yRegEx, y.toString())\n    .replace(dashYRegEx, function () {\n      if (maxY === undefined) {\n        throw new Error(\n          'If the URL template has a {-y} placeholder, the grid extent must be known',\n        );\n      }\n      return (maxY - y).toString();\n    });\n}\n\n/**\n * @param {Array<string>} urls List of URLs.\n * @param {number} z The tile z coordinate.\n * @param {number} x The tile x coordinate.\n * @param {number} y The tile y coordinate.\n * @return {string} The chosen URL.\n */\nexport function pickUrl(urls, z, x, y) {\n  const hash = hashZXY(z, x, y);\n  const index = modulo(hash, urls.length);\n  return urls[index];\n}\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}