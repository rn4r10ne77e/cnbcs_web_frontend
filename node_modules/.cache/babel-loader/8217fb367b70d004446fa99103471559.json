{"ast":null,"code":"var _jsxFileName = \"C:\\\\prj\\\\cnbcs_web_frontend\\\\src\\\\egov\\\\common\\\\EgovAttachFile.jsx\";\nimport React from 'react';\nimport * as EgovNet from 'context/egovFetch';\nimport { SERVER_URL } from 'context/config';\nimport CODE from 'context/code';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction EgovAttachFile({\n  boardFiles,\n  mode,\n  fnChangeFile,\n  fnDeleteFile\n}) {\n  console.groupCollapsed(\"EgovAttachFile\");\n  function onClickDownFile(atchFileId, fileSn) {\n    window.open(SERVER_URL + \"/cmm/fms/FileDown.do?atchFileId=\" + atchFileId + \"&fileSn=\" + fileSn + \"\");\n  }\n  function onClickDeleteFile(atchFileId, fileSn, fileIndex) {\n    console.log(\"onClickDeleteFile Params : \", atchFileId, fileSn, fileIndex);\n    const formData = new FormData();\n    formData.set(\"atchFileId\", atchFileId);\n    formData.set(\"fileSn\", fileSn);\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        //'Content-type': 'multipart/form-data'\n      },\n      body: formData\n    };\n    EgovNet.requestFetch(\"/cmm/fms/deleteFileInfsAPI.do\", requestOptions, function (resp) {\n      console.log(\"===>>> board file delete= \", resp);\n      if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\n        // 성공\n        console.log(\"Deleted fileIndex = \", fileIndex);\n        const _deleteFile = boardFiles.splice(fileIndex, 1);\n        const _boardFiles = Object.assign([], boardFiles);\n        fnDeleteFile(_boardFiles);\n        alert(\"첨부파일이 삭제되었습니다.\");\n        fnChangeFile({});\n      } else {\n        alert(\"ERR : \" + resp.resultMessage);\n      }\n    });\n  }\n  function onChangeFileInput(e) {\n    console.log(\"===>>> e = \" + e.target.files[0]);\n    fnChangeFile(e.target.files[0]);\n  }\n  let filesTag = [];\n  if (boardFiles !== undefined) {\n    boardFiles.forEach(function (item, index) {\n      filesTag.push(/*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#LINK\",\n            onClick: function (e) {\n              e.preventDefault();\n              onClickDownFile(item.atchFileId, item.fileSn);\n            },\n            download: true,\n            children: item.orignlFileNm\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"[\", item.fileMg, \"byte]\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false));\n      if (mode === CODE.MODE_MODIFY) {\n        filesTag.push(/*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn_delete\",\n            onClick: e => {\n              onClickDeleteFile(item.atchFileId, item.fileSn, index);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)\n        }, void 0, false));\n      }\n      filesTag.push(/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 27\n      }, this));\n    });\n  }\n  console.log(\"filesTag : \", filesTag);\n  console.groupEnd(\"EgovAttachFile\");\n  return /*#__PURE__*/_jsxDEV(\"dl\", {\n    children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n      children: \"\\uCCA8\\uBD80\\uD30C\\uC77C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"file_attach\",\n        children: [filesTag, (mode === CODE.MODE_MODIFY || mode === CODE.MODE_CREATE) && /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"file_0\",\n          id: \"egovComFileUploader\",\n          type: \"file\",\n          onChange: e => onChangeFileInput(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 82\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n_c = EgovAttachFile;\nexport default _c2 = /*#__PURE__*/React.memo(EgovAttachFile);\nvar _c, _c2;\n$RefreshReg$(_c, \"EgovAttachFile\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","EgovNet","SERVER_URL","CODE","jsxDEV","_jsxDEV","Fragment","_Fragment","EgovAttachFile","boardFiles","mode","fnChangeFile","fnDeleteFile","console","groupCollapsed","onClickDownFile","atchFileId","fileSn","window","open","onClickDeleteFile","fileIndex","log","formData","FormData","set","requestOptions","method","headers","body","requestFetch","resp","Number","resultCode","RCV_SUCCESS","_deleteFile","splice","_boardFiles","Object","assign","alert","resultMessage","onChangeFileInput","e","target","files","filesTag","undefined","forEach","item","index","push","children","href","onClick","preventDefault","download","orignlFileNm","fileName","_jsxFileName","lineNumber","columnNumber","fileMg","MODE_MODIFY","className","groupEnd","MODE_CREATE","name","id","type","onChange","_c","_c2","memo","$RefreshReg$"],"sources":["C:/prj/cnbcs_web_frontend/src/egov/common/EgovAttachFile.jsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport * as EgovNet from 'context/egovFetch';\r\nimport { SERVER_URL } from 'context/config';\r\nimport CODE from 'context/code';\r\n\r\nfunction EgovAttachFile({ boardFiles, mode, fnChangeFile, fnDeleteFile }) {\r\n    console.groupCollapsed(\"EgovAttachFile\");\r\n\r\n\r\n    function onClickDownFile(atchFileId, fileSn) {\r\n        window.open(SERVER_URL + \"/cmm/fms/FileDown.do?atchFileId=\" + atchFileId + \"&fileSn=\" + fileSn + \"\");\r\n    }\r\n\r\n    function onClickDeleteFile(atchFileId, fileSn, fileIndex) {\r\n        console.log(\"onClickDeleteFile Params : \", atchFileId, fileSn, fileIndex);\r\n        \r\n        const formData = new FormData();\r\n        formData.set(\"atchFileId\", atchFileId);\r\n        formData.set(\"fileSn\", fileSn);\r\n        \r\n        const requestOptions = {\r\n            method: \"POST\",\r\n            headers: {\r\n                //'Content-type': 'multipart/form-data'\r\n            },\r\n            body: formData\r\n        }\r\n        EgovNet.requestFetch(\"/cmm/fms/deleteFileInfsAPI.do\",\r\n            requestOptions,\r\n            function (resp) {\r\n                console.log(\"===>>> board file delete= \" , resp);\r\n                if (Number(resp.resultCode) === Number(CODE.RCV_SUCCESS)) {\r\n                    // 성공\r\n                    console.log(\"Deleted fileIndex = \" , fileIndex);\r\n                    const _deleteFile = boardFiles.splice(fileIndex, 1);\r\n                    const _boardFiles = Object.assign([], boardFiles);\r\n                    fnDeleteFile(_boardFiles);\r\n                    alert(\"첨부파일이 삭제되었습니다.\");\r\n                    fnChangeFile({});\r\n                } else {\r\n                    alert(\"ERR : \" + resp.resultMessage);\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    function onChangeFileInput(e) {\r\n        console.log(\"===>>> e = \" + e.target.files[0]);\r\n        fnChangeFile(e.target.files[0]);\r\n    }\r\n\r\n    let filesTag = [];\r\n\r\n    if (boardFiles !== undefined) {\r\n        boardFiles.forEach(function (item, index) {\r\n            filesTag.push(\r\n                <>\r\n                    <span>\r\n                        <a key={index} href={\"#LINK\"} onClick={function (e) {\r\n                            e.preventDefault();\r\n                            onClickDownFile(item.atchFileId, item.fileSn);\r\n                        }} download>\r\n                            {item.orignlFileNm}\r\n                        </a>\r\n                        <span>\r\n                            [{item.fileMg}byte]\r\n                        </span>\r\n                    </span>\r\n                </>\r\n            );\r\n\r\n            if (mode === CODE.MODE_MODIFY) {\r\n                filesTag.push(\r\n                    <>\r\n                        <button className=\"btn btn_delete\" onClick={(e) => {\r\n                            onClickDeleteFile(item.atchFileId, item.fileSn, index);\r\n                        }}></button>\r\n                    </>\r\n                );\r\n            }\r\n            filesTag.push(<br/>);\r\n        });\r\n    }\r\n    console.log(\"filesTag : \", filesTag);\r\n    console.groupEnd(\"EgovAttachFile\");\r\n    \r\n    return (\r\n        <dl>\r\n            <dt>첨부파일</dt>\r\n            <dd>\r\n                <span className=\"file_attach\">\r\n                    {filesTag}\r\n                    {(mode === CODE.MODE_MODIFY || mode === CODE.MODE_CREATE) && <input name=\"file_0\" id=\"egovComFileUploader\" type=\"file\" onChange={e => onChangeFileInput(e)}></input>}\r\n                </span>\r\n            </dd>\r\n        </dl>\r\n    );\r\n}\r\n\r\nexport default React.memo(EgovAttachFile);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}